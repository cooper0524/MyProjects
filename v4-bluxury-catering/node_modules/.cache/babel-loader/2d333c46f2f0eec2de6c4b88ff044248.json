{"ast":null,"code":"function TreeBuilder(element_factory) {\n  this._data = [];\n  this._elem = [];\n  this._last = null;\n  this._tail = null;\n\n  if (!element_factory) {\n    /* evil circular dep */\n    element_factory = require('./elementtree').Element;\n  }\n\n  this._factory = element_factory;\n}\n\nTreeBuilder.prototype.close = function () {\n  return this._last;\n};\n\nTreeBuilder.prototype._flush = function () {\n  if (this._data) {\n    if (this._last !== null) {\n      var text = this._data.join(\"\");\n\n      if (this._tail) {\n        this._last.tail = text;\n      } else {\n        this._last.text = text;\n      }\n    }\n\n    this._data = [];\n  }\n};\n\nTreeBuilder.prototype.data = function (data) {\n  this._data.push(data);\n};\n\nTreeBuilder.prototype.start = function (tag, attrs) {\n  this._flush();\n\n  var elem = this._factory(tag, attrs);\n\n  this._last = elem;\n\n  if (this._elem.length) {\n    this._elem[this._elem.length - 1].append(elem);\n  }\n\n  this._elem.push(elem);\n\n  this._tail = null;\n};\n\nTreeBuilder.prototype.end = function (tag) {\n  this._flush();\n\n  this._last = this._elem.pop();\n\n  if (this._last.tag !== tag) {\n    throw new Error(\"end tag mismatch\");\n  }\n\n  this._tail = 1;\n  return this._last;\n};\n\nexports.TreeBuilder = TreeBuilder;","map":{"version":3,"sources":["/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/node_modules/elementtree/lib/treebuilder.js"],"names":["TreeBuilder","element_factory","_data","_elem","_last","_tail","require","Element","_factory","prototype","close","_flush","text","join","tail","data","push","start","tag","attrs","elem","length","append","end","pop","Error","exports"],"mappings":"AAAA,SAASA,WAAT,CAAqBC,eAArB,EAAsC;AACpC,OAAKC,KAAL,GAAa,EAAb;AACA,OAAKC,KAAL,GAAa,EAAb;AACA,OAAKC,KAAL,GAAa,IAAb;AACA,OAAKC,KAAL,GAAa,IAAb;;AACA,MAAI,CAACJ,eAAL,EAAsB;AACpB;AACAA,IAAAA,eAAe,GAAGK,OAAO,CAAC,eAAD,CAAP,CAAyBC,OAA3C;AACD;;AACD,OAAKC,QAAL,GAAgBP,eAAhB;AACD;;AAEDD,WAAW,CAACS,SAAZ,CAAsBC,KAAtB,GAA8B,YAAW;AACvC,SAAO,KAAKN,KAAZ;AACD,CAFD;;AAIAJ,WAAW,CAACS,SAAZ,CAAsBE,MAAtB,GAA+B,YAAW;AACxC,MAAI,KAAKT,KAAT,EAAgB;AACd,QAAI,KAAKE,KAAL,KAAe,IAAnB,EAAyB;AACvB,UAAIQ,IAAI,GAAG,KAAKV,KAAL,CAAWW,IAAX,CAAgB,EAAhB,CAAX;;AACA,UAAI,KAAKR,KAAT,EAAgB;AACd,aAAKD,KAAL,CAAWU,IAAX,GAAkBF,IAAlB;AACD,OAFD,MAGK;AACH,aAAKR,KAAL,CAAWQ,IAAX,GAAkBA,IAAlB;AACD;AACF;;AACD,SAAKV,KAAL,GAAa,EAAb;AACD;AACF,CAbD;;AAeAF,WAAW,CAACS,SAAZ,CAAsBM,IAAtB,GAA6B,UAASA,IAAT,EAAe;AAC1C,OAAKb,KAAL,CAAWc,IAAX,CAAgBD,IAAhB;AACD,CAFD;;AAIAf,WAAW,CAACS,SAAZ,CAAsBQ,KAAtB,GAA8B,UAASC,GAAT,EAAcC,KAAd,EAAqB;AACjD,OAAKR,MAAL;;AACA,MAAIS,IAAI,GAAG,KAAKZ,QAAL,CAAcU,GAAd,EAAmBC,KAAnB,CAAX;;AACA,OAAKf,KAAL,GAAagB,IAAb;;AAEA,MAAI,KAAKjB,KAAL,CAAWkB,MAAf,EAAuB;AACrB,SAAKlB,KAAL,CAAW,KAAKA,KAAL,CAAWkB,MAAX,GAAoB,CAA/B,EAAkCC,MAAlC,CAAyCF,IAAzC;AACD;;AAED,OAAKjB,KAAL,CAAWa,IAAX,CAAgBI,IAAhB;;AAEA,OAAKf,KAAL,GAAa,IAAb;AACD,CAZD;;AAcAL,WAAW,CAACS,SAAZ,CAAsBc,GAAtB,GAA4B,UAASL,GAAT,EAAc;AACxC,OAAKP,MAAL;;AACA,OAAKP,KAAL,GAAa,KAAKD,KAAL,CAAWqB,GAAX,EAAb;;AACA,MAAI,KAAKpB,KAAL,CAAWc,GAAX,KAAmBA,GAAvB,EAA4B;AAC1B,UAAM,IAAIO,KAAJ,CAAU,kBAAV,CAAN;AACD;;AACD,OAAKpB,KAAL,GAAa,CAAb;AACA,SAAO,KAAKD,KAAZ;AACD,CARD;;AAUAsB,OAAO,CAAC1B,WAAR,GAAsBA,WAAtB","sourcesContent":["function TreeBuilder(element_factory) {\n  this._data = [];\n  this._elem = [];\n  this._last = null;\n  this._tail = null;\n  if (!element_factory) {\n    /* evil circular dep */\n    element_factory = require('./elementtree').Element;\n  }\n  this._factory = element_factory;\n}\n\nTreeBuilder.prototype.close = function() {\n  return this._last;\n};\n\nTreeBuilder.prototype._flush = function() {\n  if (this._data) {\n    if (this._last !== null) {\n      var text = this._data.join(\"\");\n      if (this._tail) {\n        this._last.tail = text;\n      }\n      else {\n        this._last.text = text;\n      }\n    }\n    this._data = [];\n  }\n};\n\nTreeBuilder.prototype.data = function(data) {\n  this._data.push(data);\n};\n\nTreeBuilder.prototype.start = function(tag, attrs) {\n  this._flush();\n  var elem = this._factory(tag, attrs);\n  this._last = elem;\n\n  if (this._elem.length) {\n    this._elem[this._elem.length - 1].append(elem);\n  }\n\n  this._elem.push(elem);\n\n  this._tail = null;\n};\n\nTreeBuilder.prototype.end = function(tag) {\n  this._flush();\n  this._last = this._elem.pop();\n  if (this._last.tag !== tag) {\n    throw new Error(\"end tag mismatch\");\n  }\n  this._tail = 1;\n  return this._last;\n};\n\nexports.TreeBuilder = TreeBuilder;\n"]},"metadata":{},"sourceType":"script"}