{"ast":null,"code":"import React,{useContext}from\"react\";import firebase,{storage}from\"../services/firebase\";import EditItem from\"../components/EditItem\";import{AdminContext}from\"../contexts/AdminContext\";import{CartContext}from\"../contexts/CartContext\";import MyCollapse from\"./MyCollapse\";import Emoji from\"./Emoji\";var ProductItem=function ProductItem(_ref){var product=_ref.product,categories=_ref.categories,doc=_ref.doc,collection=_ref.collection;var _useContext=useContext(AdminContext),admin=_useContext.admin;var _useContext2=useContext(CartContext),addProduct=_useContext2.addProduct,cartItems=_useContext2.cartItems,removeProduct=_useContext2.removeProduct;var isInCart=function isInCart(product){return!!cartItems.find(function(item){return item.id===product.id;});};var productId=product.id;var handleDelete=function handleDelete(){firebase.firestore().collection(\"products\").doc(doc).collection(collection).doc(productId).delete();var imageRef=storage.refFromURL(product.url);imageRef.delete().then(function(){console.log(\"Deleted\");}).catch(function(err){return console.log(err);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body text-center\",style:{borderColor:\"lightBlue\"}},admin&&/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(EditItem,{product:product,categories:categories,title:\"\\u7DE8\\u8F2F\\u5546\\u54C1\",doc:doc,collection:collection}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger btn-sm mr-0 ml-auto\",onClick:handleDelete},\"X\")),/*#__PURE__*/React.createElement(\"img\",{style:{display:\"block\",margin:\"10px auto 10px\",height:\"200px\"},className:\"img-fluid\",alt:\"prdImg\",src:product.url}),/*#__PURE__*/React.createElement(\"h5\",null,product.title),!product.xPrice&&/*#__PURE__*/React.createElement(\"h5\",{className:\"text-center\"},\" $ \",product.price,\" \"),product.xPrice&&/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"del\",{className:\"strike \",style:{paddingRight:\"20px\"}},\" \",\"$ \",product.price,\" \"),/*#__PURE__*/React.createElement(\"h5\",{className:\"text-center\",style:{color:\"red\"}},\" \",\"\\u7279\\u50F9 $ \",product.xPrice,\" \")),/*#__PURE__*/React.createElement(MyCollapse,{product:product,href:product.title}),!isInCart(product)?/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-success mt-2\",onClick:function onClick(){return addProduct(product);}},/*#__PURE__*/React.createElement(Emoji,{symbol:\"\\uD83D\\uDED2 \"}),\"\\u52A0\\u5165\\u8CFC\\u7269\\u8ECA\"):/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-danger mt-2\",onClick:function onClick(){return removeProduct(product);}},/*#__PURE__*/React.createElement(Emoji,{symbol:\"\\uD83D\\uDDD1 \"}),\"\\u79FB\\u51FA\\u8CFC\\u7269\\u8ECA\"));};export default ProductItem;","map":{"version":3,"sources":["/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/src/common/ProductItem.jsx"],"names":["React","useContext","firebase","storage","EditItem","AdminContext","CartContext","MyCollapse","Emoji","ProductItem","product","categories","doc","collection","admin","addProduct","cartItems","removeProduct","isInCart","find","item","id","productId","handleDelete","firestore","delete","imageRef","refFromURL","url","then","console","log","catch","err","borderColor","display","margin","height","title","xPrice","price","paddingRight","color"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\nimport firebase, { storage } from \"../services/firebase\";\nimport EditItem from \"../components/EditItem\";\nimport { AdminContext } from \"../contexts/AdminContext\";\nimport { CartContext } from \"../contexts/CartContext\";\n\nimport MyCollapse from \"./MyCollapse\";\nimport Emoji from \"./Emoji\";\n\nconst ProductItem = ({ product, categories, doc, collection }) => {\n  const { admin } = useContext(AdminContext);\n  const { addProduct, cartItems, removeProduct } = useContext(CartContext);\n  const isInCart = (product) => {\n    return !!cartItems.find((item) => item.id === product.id);\n  };\n  const productId = product.id;\n  const handleDelete = () => {\n    firebase\n      .firestore()\n      .collection(\"products\")\n      .doc(doc)\n      .collection(collection)\n      .doc(productId)\n      .delete();\n    let imageRef = storage.refFromURL(product.url);\n    imageRef\n      .delete()\n      .then(() => {\n        console.log(\"Deleted\");\n      })\n      .catch((err) => console.log(err));\n  };\n\n  return (\n    <div\n      className=\"card card-body text-center\"\n      style={{ borderColor: \"lightBlue\" }}\n    >\n      {admin && (\n        <div className=\"d-flex\">\n          <EditItem\n            product={product}\n            categories={categories}\n            title=\"編輯商品\"\n            doc={doc}\n            collection={collection}\n          />\n          <button\n            className=\"btn btn-danger btn-sm mr-0 ml-auto\"\n            onClick={handleDelete}\n          >\n            X\n          </button>\n        </div>\n      )}\n\n      <img\n        style={{\n          display: \"block\",\n          margin: \"10px auto 10px\",\n          height: \"200px\",\n        }}\n        className=\"img-fluid\"\n        alt=\"prdImg\"\n        src={product.url}\n      />\n      <h5>{product.title}</h5>\n\n      {!product.xPrice && <h5 className=\"text-center\"> $ {product.price} </h5>}\n      {product.xPrice && (\n        <div className=\"d-flex justify-content-center\">\n          <del className=\"strike \" style={{ paddingRight: \"20px\" }}>\n            {\" \"}\n            $ {product.price}{\" \"}\n          </del>\n          <h5 className=\"text-center\" style={{ color: \"red\" }}>\n            {\" \"}\n            特價 $ {product.xPrice}{\" \"}\n          </h5>\n        </div>\n      )}\n      <MyCollapse product={product} href={product.title} />\n\n      {!isInCart(product) ? (\n        <button\n          className=\"btn btn-outline-success mt-2\"\n          onClick={() => addProduct(product)}\n        >\n          <Emoji symbol=\"🛒 \" />\n          加入購物車\n        </button>\n      ) : (\n        <button\n          className=\"btn btn-outline-danger mt-2\"\n          onClick={() => removeProduct(product)}\n        >\n          <Emoji symbol=\"🗑 \" />\n          移出購物車\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default ProductItem;\n"]},"metadata":{},"sourceType":"module"}