{"ast":null,"code":"import React,{useContext}from\"react\";import firebase,{storage}from\"../services/firebase\";import EditItem from\"../components/EditItem\";import{AdminContext}from\"../contexts/AdminContext\";import{CartContext}from\"../contexts/CartContext\";var ProductItem=function ProductItem(_ref){var product=_ref.product,categories=_ref.categories;var _useContext=useContext(AdminContext),admin=_useContext.admin;var _useContext2=useContext(CartContext),addProduct=_useContext2.addProduct,cartItems=_useContext2.cartItems,removeProduct=_useContext2.removeProduct;var isInCart=function isInCart(product){return!!cartItems.find(function(item){return item.id===product.id;});};var productId=product.id;var handleDelete=function handleDelete(){firebase.firestore().collection(\"products\").doc(productId).delete();var imageRef=storage.refFromURL(product.url);imageRef.delete().then(function(){console.log(\"Deleted\");}).catch(function(err){return console.log(err);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body text-center\",style:{borderColor:\"lightBlue\"}},admin&&/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(EditItem,{product:product,categories:categories}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger btn-sm mr-0 ml-auto\",onClick:handleDelete},\"X\")),/*#__PURE__*/React.createElement(\"img\",{style:{display:\"block\",margin:\"10px auto 10px\",height:\"200px\"},className:\"img-fluid\",alt:\"prdImg\",src:product.url}),/*#__PURE__*/React.createElement(\"h6\",null,product.title),!product.xPrice&&/*#__PURE__*/React.createElement(\"h5\",{className:\"text-center\"},\" $ \",product.price,\" \"),product.xPrice&&/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"del\",{className:\"strike \",style:{paddingRight:\"20px\"}},\" \",\"$ \",product.price,\" \"),/*#__PURE__*/React.createElement(\"h5\",{className:\"text-center\",style:{color:\"red\"}},\" \",\"\\u7279\\u50F9 $ \",product.xPrice,\" \")),!isInCart(product)?/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-success\",onClick:function onClick(){return addProduct(product);}},\"\\u52A0\\u5165\\u8CFC\\u7269\\u8ECA\"):/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-danger\",onClick:function onClick(){return removeProduct(product);}},\"\\u79FB\\u51FA\\u8CFC\\u7269\\u8ECA\"));};export default ProductItem;","map":{"version":3,"sources":["/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/src/common/ProductItem.jsx"],"names":["React","useContext","firebase","storage","EditItem","AdminContext","CartContext","ProductItem","product","categories","admin","addProduct","cartItems","removeProduct","isInCart","find","item","id","productId","handleDelete","firestore","collection","doc","delete","imageRef","refFromURL","url","then","console","log","catch","err","borderColor","display","margin","height","title","xPrice","price","paddingRight","color"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\nimport firebase, { storage } from \"../services/firebase\";\nimport EditItem from \"../components/EditItem\";\nimport { AdminContext } from \"../contexts/AdminContext\";\nimport { CartContext } from \"../contexts/CartContext\";\n\nconst ProductItem = ({ product, categories }) => {\n  const { admin } = useContext(AdminContext);\n  const { addProduct, cartItems, removeProduct } = useContext(CartContext);\n  const isInCart = (product) => {\n    return !!cartItems.find((item) => item.id === product.id);\n  };\n  const productId = product.id;\n  const handleDelete = () => {\n    firebase.firestore().collection(\"products\").doc(productId).delete();\n    let imageRef = storage.refFromURL(product.url);\n    imageRef\n      .delete()\n      .then(() => {\n        console.log(\"Deleted\");\n      })\n      .catch((err) => console.log(err));\n  };\n\n  return (\n    <div\n      className=\"card card-body text-center\"\n      style={{ borderColor: \"lightBlue\" }}\n    >\n      {admin && (\n        <div className=\"d-flex\">\n          <EditItem product={product} categories={categories} />\n          <button\n            className=\"btn btn-danger btn-sm mr-0 ml-auto\"\n            onClick={handleDelete}\n          >\n            X\n          </button>\n        </div>\n      )}\n\n      <img\n        style={{\n          display: \"block\",\n          margin: \"10px auto 10px\",\n          height: \"200px\",\n        }}\n        className=\"img-fluid\"\n        alt=\"prdImg\"\n        src={product.url}\n      />\n      <h6>{product.title}</h6>\n      {!product.xPrice && <h5 className=\"text-center\"> $ {product.price} </h5>}\n      {product.xPrice && (\n        <div className=\"d-flex justify-content-center\">\n          <del className=\"strike \" style={{ paddingRight: \"20px\" }}>\n            {\" \"}\n            $ {product.price}{\" \"}\n          </del>\n          <h5 className=\"text-center\" style={{ color: \"red\" }}>\n            {\" \"}\n            特價 $ {product.xPrice}{\" \"}\n          </h5>\n        </div>\n      )}\n\n      {!isInCart(product) ? (\n        <button\n          className=\"btn btn-outline-success\"\n          onClick={() => addProduct(product)}\n        >\n          加入購物車\n        </button>\n      ) : (\n        <button\n          className=\"btn btn-outline-danger\"\n          onClick={() => removeProduct(product)}\n        >\n          移出購物車\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default ProductItem;\n"]},"metadata":{},"sourceType":"module"}