{"ast":null,"code":"import _slicedToArray from\"/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from\"react\";import SearchBox from\"../common/SearchBox\";import Filter from\"../common/Filter\";import ProductsGrid from\"../common/ProductsGrid\";// import { ProductsContext } from \"../contexts/ProductsContext\";\nimport PopupMsg from\"./PopupMsg\";import{AdminContext}from\"../contexts/AdminContext\";import useFetchProducts from\"../customHook/useFectchProducts\";var Simplist=function Simplist(){var products=useFetchProducts(\"simplist\",\"simplistProducts\");var _useContext=useContext(AdminContext),admin=_useContext.admin;var defaultSrc=\"https://scontent.ftpe11-2.fna.fbcdn.net/v/t1.0-9/118357132_102096594957330_7643131861856996871_n.jpg?_nc_cat=106&_nc_sid=85a577&_nc_ohc=R6lhp2UfybUAX9DN-mq&_nc_ht=scontent.ftpe11-2.fna&oh=87849d515a8cacedd527c19404651a70&oe=5F7176F2\";var categories=[\"牛肉\",\"雞肉\",\"豬肉\",\"其他商品\"];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];var _useState3=useState(\"全部商品\"),_useState4=_slicedToArray(_useState3,2),selectedGenre=_useState4[0],setSelectedGenre=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),searchResults=_useState6[0],setSearchResults=_useState6[1];var handleSearchChange=function handleSearchChange(e){setSearchTerm(e.target.value);setSelectedGenre(\"全部商品\");};var handleItemCategoryChange=function handleItemCategoryChange(category){setSelectedGenre(category);setSearchTerm(\"\");};useEffect(function(){var results=products;if(searchTerm)results=products.filter(function(product){return product.title.toLowerCase().includes(searchTerm.toLowerCase());});else if(selectedGenre===\"全部商品\")results=products;else if(selectedGenre){results=products.filter(function(product){return product.category===selectedGenre;});}setSearchResults(results);},[products,searchTerm,selectedGenre]);return/*#__PURE__*/React.createElement(\"div\",{style:{alignItems:\"baseline\"}},admin&&/*#__PURE__*/React.createElement(PopupMsg,{src:defaultSrc,categories:categories,doc:\"simplist\",collection:\"simplistProducts\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-8\",style:{paddingTop:\"20px\"}},/*#__PURE__*/React.createElement(Filter,{products:products,categories:categories,selectedGenre:selectedGenre,onClick:handleItemCategoryChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-4\",style:{paddingTop:\"20px\"}},/*#__PURE__*/React.createElement(SearchBox,{products:products,value:searchTerm,onChange:handleSearchChange}))),/*#__PURE__*/React.createElement(ProductsGrid,{searchResults:searchResults,categories:categories,doc:\"simplist\",collection:\"simplistProducts\",src:defaultSrc}));};export default Simplist;","map":{"version":3,"sources":["/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/src/components/Simplist.jsx"],"names":["React","useContext","useState","useEffect","SearchBox","Filter","ProductsGrid","PopupMsg","AdminContext","useFetchProducts","Simplist","products","admin","defaultSrc","categories","searchTerm","setSearchTerm","selectedGenre","setSelectedGenre","searchResults","setSearchResults","handleSearchChange","e","target","value","handleItemCategoryChange","category","results","filter","product","title","toLowerCase","includes","alignItems","paddingTop"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport SearchBox from \"../common/SearchBox\";\nimport Filter from \"../common/Filter\";\nimport ProductsGrid from \"../common/ProductsGrid\";\n// import { ProductsContext } from \"../contexts/ProductsContext\";\nimport PopupMsg from \"./PopupMsg\";\nimport { AdminContext } from \"../contexts/AdminContext\";\nimport useFetchProducts from \"../customHook/useFectchProducts\";\n\nconst Simplist = () => {\n  const products = useFetchProducts(\"simplist\", \"simplistProducts\");\n  const { admin } = useContext(AdminContext);\n  const defaultSrc =\n    \"https://scontent.ftpe11-2.fna.fbcdn.net/v/t1.0-9/118357132_102096594957330_7643131861856996871_n.jpg?_nc_cat=106&_nc_sid=85a577&_nc_ohc=R6lhp2UfybUAX9DN-mq&_nc_ht=scontent.ftpe11-2.fna&oh=87849d515a8cacedd527c19404651a70&oe=5F7176F2\";\n  const categories = [\"牛肉\", \"雞肉\", \"豬肉\", \"其他商品\"];\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedGenre, setSelectedGenre] = useState(\"全部商品\");\n  const [searchResults, setSearchResults] = useState([]);\n\n  const handleSearchChange = (e) => {\n    setSearchTerm(e.target.value);\n    setSelectedGenre(\"全部商品\");\n  };\n  const handleItemCategoryChange = (category) => {\n    setSelectedGenre(category);\n    setSearchTerm(\"\");\n  };\n  useEffect(() => {\n    let results = products;\n    if (searchTerm)\n      results = products.filter((product) =>\n        product.title.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    else if (selectedGenre === \"全部商品\") results = products;\n    else if (selectedGenre) {\n      results = products.filter(\n        (product) => product.category === selectedGenre\n      );\n    }\n    setSearchResults(results);\n  }, [products, searchTerm, selectedGenre]);\n\n  return (\n    <div style={{ alignItems: \"baseline\" }}>\n      {admin && (\n        <PopupMsg\n          src={defaultSrc}\n          categories={categories}\n          doc=\"simplist\"\n          collection=\"simplistProducts\"\n        />\n      )}\n\n      <div className=\"row\">\n        <div className=\"col-sm-8\" style={{ paddingTop: \"20px\" }}>\n          <Filter\n            products={products}\n            categories={categories}\n            selectedGenre={selectedGenre}\n            onClick={handleItemCategoryChange}\n          />\n        </div>\n        <div className=\"col-sm-4\" style={{ paddingTop: \"20px\" }}>\n          <SearchBox\n            products={products}\n            value={searchTerm}\n            onChange={handleSearchChange}\n          />\n        </div>\n      </div>\n      <ProductsGrid\n        searchResults={searchResults}\n        categories={categories}\n        doc=\"simplist\"\n        collection=\"simplistProducts\"\n        src={defaultSrc}\n      />\n    </div>\n  );\n};\n\nexport default Simplist;\n"]},"metadata":{},"sourceType":"module"}