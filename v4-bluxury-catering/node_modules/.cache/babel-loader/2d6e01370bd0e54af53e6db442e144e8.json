{"ast":null,"code":"import _slicedToArray from\"/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from\"react\";import SearchBox from\"../common/SearchBox\";import Filter from\"../common/Filter\";import ProductsGrid from\"../common/ProductsGrid\";// import { ProductsContext } from \"../contexts/ProductsContext\";\nimport PopupMsg from\"./PopupMsg\";import{AdminContext}from\"../contexts/AdminContext\";import useFetchProducts from\"../customHook/useFectchProducts\";var Memory=function Memory(){var products=useFetchProducts(\"memory\",\"memoryProducts\");var _useContext=useContext(AdminContext),admin=_useContext.admin;var categories=[\"生乳捲\",\"生乳塔\",\"常溫蛋糕\",\"節慶禮盒\",\"其他商品\"];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];var _useState3=useState(\"全部商品\"),_useState4=_slicedToArray(_useState3,2),selectedGenre=_useState4[0],setSelectedGenre=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),searchResults=_useState6[0],setSearchResults=_useState6[1];var handleSearchChange=function handleSearchChange(e){setSearchTerm(e.target.value);setSelectedGenre(\"全部商品\");};var handleItemCategoryChange=function handleItemCategoryChange(category){setSelectedGenre(category);setSearchTerm(\"\");};useEffect(function(){var results=products;if(searchTerm)results=products.filter(function(product){return product.title.toLowerCase().includes(searchTerm.toLowerCase());});else if(selectedGenre===\"全部商品\")results=products;else if(selectedGenre){results=products.filter(function(product){return product.category===selectedGenre;});}setSearchResults(results);},[products,searchTerm,selectedGenre]);return/*#__PURE__*/React.createElement(\"div\",{style:{alignItems:\"baseline\"}},admin&&/*#__PURE__*/React.createElement(PopupMsg,{src:\"https://scontent.ftpe12-1.fna.fbcdn.net/v/t31.0-0/p206x206/22712353_648259815562546_9040069549059309313_o.jpg?_nc_cat=104&_nc_sid=09cbfe&_nc_ohc=4RxqhClM2n0AX9KLJX_&_nc_ht=scontent.ftpe12-1.fna&_nc_tp=6&oh=c2710cb7a11d7c2f90527348f4d35902&oe=5F624FE0\",categories:categories,doc:\"memory\",collection:\"memoryProducts\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-8\",style:{paddingTop:\"20px\"}},/*#__PURE__*/React.createElement(Filter,{products:products,categories:categories,selectedGenre:selectedGenre,onClick:handleItemCategoryChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-4\",style:{paddingTop:\"20px\"}},/*#__PURE__*/React.createElement(SearchBox,{products:products,value:searchTerm,onChange:handleSearchChange}))),/*#__PURE__*/React.createElement(ProductsGrid,{searchResults:searchResults,categories:categories,doc:\"memory\",collection:\"memoryProducts\"}));};export default Memory;","map":{"version":3,"sources":["/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/src/components/Memory.jsx"],"names":["React","useContext","useState","useEffect","SearchBox","Filter","ProductsGrid","PopupMsg","AdminContext","useFetchProducts","Memory","products","admin","categories","searchTerm","setSearchTerm","selectedGenre","setSelectedGenre","searchResults","setSearchResults","handleSearchChange","e","target","value","handleItemCategoryChange","category","results","filter","product","title","toLowerCase","includes","alignItems","paddingTop"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport SearchBox from \"../common/SearchBox\";\nimport Filter from \"../common/Filter\";\nimport ProductsGrid from \"../common/ProductsGrid\";\n// import { ProductsContext } from \"../contexts/ProductsContext\";\nimport PopupMsg from \"./PopupMsg\";\nimport { AdminContext } from \"../contexts/AdminContext\";\nimport useFetchProducts from \"../customHook/useFectchProducts\";\n\nconst Memory = () => {\n  const products = useFetchProducts(\"memory\", \"memoryProducts\");\n  const { admin } = useContext(AdminContext);\n\n  const categories = [\"生乳捲\", \"生乳塔\", \"常溫蛋糕\", \"節慶禮盒\", \"其他商品\"];\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedGenre, setSelectedGenre] = useState(\"全部商品\");\n  const [searchResults, setSearchResults] = useState([]);\n\n  const handleSearchChange = (e) => {\n    setSearchTerm(e.target.value);\n    setSelectedGenre(\"全部商品\");\n  };\n  const handleItemCategoryChange = (category) => {\n    setSelectedGenre(category);\n    setSearchTerm(\"\");\n  };\n  useEffect(() => {\n    let results = products;\n    if (searchTerm)\n      results = products.filter((product) =>\n        product.title.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    else if (selectedGenre === \"全部商品\") results = products;\n    else if (selectedGenre) {\n      results = products.filter(\n        (product) => product.category === selectedGenre\n      );\n    }\n    setSearchResults(results);\n  }, [products, searchTerm, selectedGenre]);\n\n  return (\n    <div style={{ alignItems: \"baseline\" }}>\n      {admin && (\n        <PopupMsg\n          src={\n            \"https://scontent.ftpe12-1.fna.fbcdn.net/v/t31.0-0/p206x206/22712353_648259815562546_9040069549059309313_o.jpg?_nc_cat=104&_nc_sid=09cbfe&_nc_ohc=4RxqhClM2n0AX9KLJX_&_nc_ht=scontent.ftpe12-1.fna&_nc_tp=6&oh=c2710cb7a11d7c2f90527348f4d35902&oe=5F624FE0\"\n          }\n          categories={categories}\n          doc=\"memory\"\n          collection=\"memoryProducts\"\n        />\n      )}\n\n      <div className=\"row\">\n        <div className=\"col-sm-8\" style={{ paddingTop: \"20px\" }}>\n          <Filter\n            products={products}\n            categories={categories}\n            selectedGenre={selectedGenre}\n            onClick={handleItemCategoryChange}\n          />\n        </div>\n        <div className=\"col-sm-4\" style={{ paddingTop: \"20px\" }}>\n          <SearchBox\n            products={products}\n            value={searchTerm}\n            onChange={handleSearchChange}\n          />\n        </div>\n      </div>\n      <ProductsGrid\n        searchResults={searchResults}\n        categories={categories}\n        doc=\"memory\"\n        collection=\"memoryProducts\"\n      />\n    </div>\n  );\n};\n\nexport default Memory;\n"]},"metadata":{},"sourceType":"module"}