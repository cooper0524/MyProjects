{"ast":null,"code":"var _jsxFileName = \"/Users/Cooper/Bluxury_Catering/bluxury-catering/src/common/Form.jsx\";\nimport React, { Component, useState } from \"react\";\nimport Joi from \"joi-browser\";\nimport Input from \"./input\";\nimport Select from \"./select\";\n\nconst Form = () => {\n  const [data, setData] = useState([]);\n  const [errors, setErrors] = useState([]);\n\n  validate = () => {\n    const options = {\n      abortEarly: false\n    };\n    const {\n      error\n    } = Joi.validate(data, this.schema, options);\n    if (!error) return null;\n    const errors = {};\n\n    for (let item of error.details) errors[item.path[0]] = item.message;\n\n    return errors;\n  };\n\n  validateProperty = ({\n    name,\n    value\n  }) => {\n    const obj = {\n      [name]: value\n    };\n    const schema = {\n      [name]: this.schema[name]\n    };\n    const {\n      error\n    } = Joi.validate(obj, schema);\n    return error ? error.details[0].message : null;\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const errors = this.validate();\n    setErrors({\n      errors: errors || {}\n    });\n    if (errors) return;\n    this.doSubmit();\n  };\n\n  handleChange = ({\n    currentTarget: input\n  }) => {\n    const errors = { ...this.state.errors\n    };\n    const errorMessage = this.validateProperty(input);\n    if (errorMessage) errors[input.name] = errorMessage;else delete errors[input.name];\n    data[input.name] = input.value;\n    this.setState({\n      data,\n      errors\n    });\n    setData({\n      data\n    });\n    setErrors({\n      errors\n    });\n  };\n\n  renderButton = label => {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      disabled: this.validate(),\n      className: \"btn btn-primary mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }\n    }, label);\n  };\n\n  renderInput = (name, label, type = \"text\") => {\n    const {\n      data,\n      errors\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Input, {\n      type: type,\n      name: name,\n      value: data[name],\n      label: label,\n      onChange: this.handleChange,\n      error: errors[name],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }\n    });\n  };\n\n  renderSelect = (name, label, options) => {\n    const {\n      data,\n      errors\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Select, {\n      name: name,\n      value: data[name],\n      label: label,\n      options: options,\n      onChange: this.handleChange,\n      error: errors[name],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    });\n  };\n};\n\nexport default Form;","map":{"version":3,"sources":["/Users/Cooper/Bluxury_Catering/bluxury-catering/src/common/Form.jsx"],"names":["React","Component","useState","Joi","Input","Select","Form","data","setData","errors","setErrors","validate","options","abortEarly","error","schema","item","details","path","message","validateProperty","name","value","obj","handleSubmit","e","preventDefault","doSubmit","handleChange","currentTarget","input","state","errorMessage","setState","renderButton","label","renderInput","type","renderSelect"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\nimport Joi from \"joi-browser\";\nimport Input from \"./input\";\nimport Select from \"./select\";\n\nconst Form = () => {\n  const [data, setData] = useState([]);\n  const [errors, setErrors] = useState([]);\n\n  validate = () => {\n    const options = { abortEarly: false };\n    const { error } = Joi.validate(data, this.schema, options);\n    if (!error) return null;\n\n    const errors = {};\n    for (let item of error.details) errors[item.path[0]] = item.message;\n    return errors;\n  };\n\n  validateProperty = ({ name, value }) => {\n    const obj = { [name]: value };\n    const schema = { [name]: this.schema[name] };\n    const { error } = Joi.validate(obj, schema);\n    return error ? error.details[0].message : null;\n  };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    const errors = this.validate();\n    setErrors({ errors: errors || {} });\n    if (errors) return;\n    this.doSubmit();\n  };\n\n  handleChange = ({ currentTarget: input }) => {\n    const errors = { ...this.state.errors };\n    const errorMessage = this.validateProperty(input);\n    if (errorMessage) errors[input.name] = errorMessage;\n    else delete errors[input.name];\n\n    data[input.name] = input.value;\n    this.setState({ data, errors });\n    setData({ data });\n    setErrors({ errors });\n  };\n\n  renderButton = (label) => {\n    return (\n      <button disabled={this.validate()} className=\"btn btn-primary mb-3\">\n        {label}\n      </button>\n    );\n  };\n  renderInput = (name, label, type = \"text\") => {\n    const { data, errors } = this.state;\n    return (\n      <Input\n        type={type}\n        name={name}\n        value={data[name]}\n        label={label}\n        onChange={this.handleChange}\n        error={errors[name]}\n      />\n    );\n  };\n\n  renderSelect = (name, label, options) => {\n    const { data, errors } = this.state;\n    return (\n      <Select\n        name={name}\n        value={data[name]}\n        label={label}\n        options={options}\n        onChange={this.handleChange}\n        error={errors[name]}\n      />\n    );\n  };\n};\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}