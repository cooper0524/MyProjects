{"ast":null,"code":"import _slicedToArray from\"/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{createContext,useReducer}from\"react\";import{CartReducer,sumItems}from\"./CartReducer\";import firebase,{auth}from\"../services/firebase\";export var CartContext=createContext();var storage=localStorage.getItem(\"cart\")?JSON.parse(localStorage.getItem(\"cart\")):[];var initialState=_objectSpread(_objectSpread({cartItems:storage},sumItems(storage)),{},{checkout:false});var CartContextProvider=function CartContextProvider(_ref){var children=_ref.children;var _useReducer=useReducer(CartReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var increase=function increase(payload){dispatch({type:\"INCREASE\",payload:payload});};var decrease=function decrease(payload){dispatch({type:\"DECREASE\",payload:payload});};var addProduct=function addProduct(payload){dispatch({type:\"ADD_ITEM\",payload:payload});};var removeProduct=function removeProduct(payload){dispatch({type:\"REMOVE_ITEM\",payload:payload});};var clearCart=function clearCart(){dispatch({type:\"CLEAR\"});};var handleCheckout=function handleCheckout(){console.log(\"CHECKOUT\",state);dispatch({type:\"CHECKOUT\"});var consumer=\"\";if(auth.currentUser){consumer=auth.currentUser.uid;}var purchaseDate=firebase.firestore.Timestamp.fromDate(new Date()).toDate();firebase.firestore().collection(\"consumption\").doc(purchaseDate.toString()).set({items:state,purchaseDate:purchaseDate,consumer:consumer});};var contextValues=_objectSpread({removeProduct:removeProduct,addProduct:addProduct,increase:increase,decrease:decrease,clearCart:clearCart,handleCheckout:handleCheckout},state);return/*#__PURE__*/React.createElement(CartContext.Provider,{value:contextValues},children);};export default CartContextProvider;","map":{"version":3,"sources":["/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/src/contexts/CartContext.jsx"],"names":["React","createContext","useReducer","CartReducer","sumItems","firebase","auth","CartContext","storage","localStorage","getItem","JSON","parse","initialState","cartItems","checkout","CartContextProvider","children","state","dispatch","increase","payload","type","decrease","addProduct","removeProduct","clearCart","handleCheckout","console","log","consumer","currentUser","uid","purchaseDate","firestore","Timestamp","fromDate","Date","toDate","collection","doc","toString","set","items","contextValues"],"mappings":"yVAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,CAA+BC,UAA/B,KAAiD,OAAjD,CACA,OAASC,WAAT,CAAsBC,QAAtB,KAAsC,eAAtC,CACA,MAAOC,CAAAA,QAAP,EAAmBC,IAAnB,KAA+B,sBAA/B,CAEA,MAAO,IAAMC,CAAAA,WAAW,CAAGN,aAAa,EAAjC,CAEP,GAAMO,CAAAA,OAAO,CAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,EACZC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CADY,CAEZ,EAFJ,CAGA,GAAMG,CAAAA,YAAY,8BAChBC,SAAS,CAAEN,OADK,EAEbJ,QAAQ,CAACI,OAAD,CAFK,MAGhBO,QAAQ,CAAE,KAHM,EAAlB,CAMA,GAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,iBAClBf,UAAU,CAACC,WAAD,CAAcU,YAAd,CADQ,4CACrCK,KADqC,iBAC9BC,QAD8B,iBAG5C,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,OAAD,CAAa,CAC5BF,QAAQ,CAAC,CAAEG,IAAI,CAAE,UAAR,CAAoBD,OAAO,CAAPA,OAApB,CAAD,CAAR,CACD,CAFD,CAIA,GAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACF,OAAD,CAAa,CAC5BF,QAAQ,CAAC,CAAEG,IAAI,CAAE,UAAR,CAAoBD,OAAO,CAAPA,OAApB,CAAD,CAAR,CACD,CAFD,CAIA,GAAMG,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACH,OAAD,CAAa,CAC9BF,QAAQ,CAAC,CAAEG,IAAI,CAAE,UAAR,CAAoBD,OAAO,CAAPA,OAApB,CAAD,CAAR,CACD,CAFD,CAIA,GAAMI,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACJ,OAAD,CAAa,CACjCF,QAAQ,CAAC,CAAEG,IAAI,CAAE,aAAR,CAAuBD,OAAO,CAAPA,OAAvB,CAAD,CAAR,CACD,CAFD,CAIA,GAAMK,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtBP,QAAQ,CAAC,CAAEG,IAAI,CAAE,OAAR,CAAD,CAAR,CACD,CAFD,CAIA,GAAMK,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3BC,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBX,KAAxB,EACAC,QAAQ,CAAC,CAAEG,IAAI,CAAE,UAAR,CAAD,CAAR,CACA,GAAIQ,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAIxB,IAAI,CAACyB,WAAT,CAAsB,CACpBD,QAAQ,CAAGxB,IAAI,CAACyB,WAAL,CAAiBC,GAA5B,CACD,CACD,GAAMC,CAAAA,YAAY,CAAG5B,QAAQ,CAAC6B,SAAT,CAAmBC,SAAnB,CAA6BC,QAA7B,CACnB,GAAIC,CAAAA,IAAJ,EADmB,EAEnBC,MAFmB,EAArB,CAGAjC,QAAQ,CACL6B,SADH,GAEGK,UAFH,CAEc,aAFd,EAGGC,GAHH,CAGOP,YAAY,CAACQ,QAAb,EAHP,EAIGC,GAJH,CAIO,CACHC,KAAK,CAAEzB,KADJ,CAEHe,YAAY,CAAEA,YAFX,CAGHH,QAAQ,CAAEA,QAHP,CAJP,EASD,CAnBD,CAqBA,GAAMc,CAAAA,aAAa,gBACjBnB,aAAa,CAAbA,aADiB,CAEjBD,UAAU,CAAVA,UAFiB,CAGjBJ,QAAQ,CAARA,QAHiB,CAIjBG,QAAQ,CAARA,QAJiB,CAKjBG,SAAS,CAATA,SALiB,CAMjBC,cAAc,CAAdA,cANiB,EAOdT,KAPc,CAAnB,CAUA,mBACE,oBAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE0B,aAA7B,EACG3B,QADH,CADF,CAKD,CA3DD,CA6DA,cAAeD,CAAAA,mBAAf","sourcesContent":["import React, { createContext, useReducer } from \"react\";\nimport { CartReducer, sumItems } from \"./CartReducer\";\nimport firebase, { auth } from \"../services/firebase\";\n\nexport const CartContext = createContext();\n\nconst storage = localStorage.getItem(\"cart\")\n  ? JSON.parse(localStorage.getItem(\"cart\"))\n  : [];\nconst initialState = {\n  cartItems: storage,\n  ...sumItems(storage),\n  checkout: false,\n};\n\nconst CartContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(CartReducer, initialState);\n\n  const increase = (payload) => {\n    dispatch({ type: \"INCREASE\", payload });\n  };\n\n  const decrease = (payload) => {\n    dispatch({ type: \"DECREASE\", payload });\n  };\n\n  const addProduct = (payload) => {\n    dispatch({ type: \"ADD_ITEM\", payload });\n  };\n\n  const removeProduct = (payload) => {\n    dispatch({ type: \"REMOVE_ITEM\", payload });\n  };\n\n  const clearCart = () => {\n    dispatch({ type: \"CLEAR\" });\n  };\n\n  const handleCheckout = () => {\n    console.log(\"CHECKOUT\", state);\n    dispatch({ type: \"CHECKOUT\" });\n    var consumer = \"\";\n    if (auth.currentUser) {\n      consumer = auth.currentUser.uid;\n    }\n    const purchaseDate = firebase.firestore.Timestamp.fromDate(\n      new Date()\n    ).toDate();\n    firebase\n      .firestore()\n      .collection(\"consumption\")\n      .doc(purchaseDate.toString())\n      .set({\n        items: state,\n        purchaseDate: purchaseDate,\n        consumer: consumer,\n      });\n  };\n\n  const contextValues = {\n    removeProduct,\n    addProduct,\n    increase,\n    decrease,\n    clearCart,\n    handleCheckout,\n    ...state,\n  };\n\n  return (\n    <CartContext.Provider value={contextValues}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport default CartContextProvider;\n"]},"metadata":{},"sourceType":"module"}