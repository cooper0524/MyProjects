{"ast":null,"code":"import _slicedToArray from\"/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import CustomField from\"../common/CustomField\";import{Redirect}from\"react-router-dom\";import{Formik,Form}from\"formik\";import firebase,{auth}from\"../services/firebase\";import*as Yup from\"yup\";import{UserContext}from\"../contexts/UserContext\";var RegisterForm=function RegisterForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useContext=useContext(UserContext),authUser=_useContext.authUser;function handleSignUp(){auth.createUserWithEmailAndPassword(email,password).then(function(){//Once the user creation has happened successfully, we can add the currentUser into firestore\n//with the appropriate details.\nfirebase.firestore().collection(\"users\").doc(auth.currentUser.uid).set({email:email,password:password,username:username,admin:false})//ensure we catch any errors at this stage to advise us if something does go wrong\n.catch(function(error){console.log(\"Something went wrong with added user to firestore: \",error);});}).catch(function(error){// Handle Errors here.\nvar errorCode=error.code;var errorMessage=error.message;// [START_EXCLUDE]\nif(errorCode===\"auth/weak-password\"){alert(\"The password is too weak.\");}else{console.log(errorMessage);}// [END_EXCLUDE]\n});// [END createwithemail]\n}var validationSchema=Yup.object().shape({username:Yup.string().required(\"Username is required\"),email:Yup.string().email(\"Email is invalid\").required(\"Email is required\"),password:Yup.string().min(6,\"Password must be at least 6 characters\").required(\"Password is required\"),confirmPassword:Yup.string().oneOf([Yup.ref(\"password\"),null],\"Passwords must match\").required(\"Confirm Password is required\")});var initialValues={username:username,email:email,password:password,confirmPassword:confirmPassword};return/*#__PURE__*/React.createElement(\"div\",{id:\"form\"},authUser&&/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}),/*#__PURE__*/React.createElement(\"h1\",{id:\"formTitle\"},\"\\u6703\\u54E1\\u8A3B\\u518A\"),/*#__PURE__*/React.createElement(Formik,{initialValues:initialValues,validationSchema:validationSchema,onSubmit:function onSubmit(values){return console.log(values);}},function(_ref){var errors=_ref.errors,touched=_ref.touched;return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(CustomField,{label:\"\\u540D\\u7A31\",name:\"username\",type:\"text\",errors:errors.username,touched:touched.username,onKeyUp:function onKeyUp(e){setUsername(e.target.value);}}),/*#__PURE__*/React.createElement(CustomField,{label:\"\\u90F5\\u4EF6\",name:\"email\",type:\"email\",errors:errors.email,touched:touched.email,onKeyUp:function onKeyUp(e){setEmail(e.target.value);}}),/*#__PURE__*/React.createElement(CustomField,{label:\"\\u5BC6\\u78BC\",name:\"password\",type:\"password\",errors:errors.password,touched:touched.password,onKeyUp:function onKeyUp(e){setPassword(e.target.value);}}),/*#__PURE__*/React.createElement(CustomField,{label:\"\\u78BA\\u8A8D\\u5BC6\\u78BC\",name:\"confirmPassword\",type:\"password\",errors:errors.confirmPassword,touched:touched.confirmPassword,onKeyUp:function onKeyUp(e){setConfirmPassword(e.target.value);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mt-2\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",value:\"Submit\",className:\"btn btn-primary mt-2\",onClick:handleSignUp},\"\\u78BA\\u8A8D\\u9001\\u51FA\")));}));};export default RegisterForm;","map":{"version":3,"sources":["/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/src/components/RegisterForm.jsx"],"names":["React","useState","useContext","CustomField","Redirect","Formik","Form","firebase","auth","Yup","UserContext","RegisterForm","email","setEmail","password","setPassword","username","setUsername","confirmPassword","setConfirmPassword","authUser","handleSignUp","createUserWithEmailAndPassword","then","firestore","collection","doc","currentUser","uid","set","admin","catch","error","console","log","errorCode","code","errorMessage","message","alert","validationSchema","object","shape","string","required","min","oneOf","ref","initialValues","values","errors","touched","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport CustomField from \"../common/CustomField\";\nimport { Redirect } from \"react-router-dom\";\nimport { Formik, Form } from \"formik\";\nimport firebase, { auth } from \"../services/firebase\";\nimport * as Yup from \"yup\";\nimport { UserContext } from \"../contexts/UserContext\";\n\nconst RegisterForm = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const { authUser } = useContext(UserContext);\n\n  function handleSignUp() {\n    auth\n      .createUserWithEmailAndPassword(email, password)\n      .then(() => {\n        //Once the user creation has happened successfully, we can add the currentUser into firestore\n        //with the appropriate details.\n        firebase\n          .firestore()\n          .collection(\"users\")\n          .doc(auth.currentUser.uid)\n          .set({\n            email: email,\n            password: password,\n            username: username,\n            admin: false,\n          })\n          //ensure we catch any errors at this stage to advise us if something does go wrong\n          .catch((error) => {\n            console.log(\n              \"Something went wrong with added user to firestore: \",\n              error\n            );\n          });\n      })\n      .catch(function (error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        // [START_EXCLUDE]\n        if (errorCode === \"auth/weak-password\") {\n          alert(\"The password is too weak.\");\n        } else {\n          console.log(errorMessage);\n        }\n\n        // [END_EXCLUDE]\n      });\n    // [END createwithemail]\n  }\n\n  const validationSchema = Yup.object().shape({\n    username: Yup.string().required(\"Username is required\"),\n    email: Yup.string().email(\"Email is invalid\").required(\"Email is required\"),\n    password: Yup.string()\n      .min(6, \"Password must be at least 6 characters\")\n      .required(\"Password is required\"),\n    confirmPassword: Yup.string()\n      .oneOf([Yup.ref(\"password\"), null], \"Passwords must match\")\n      .required(\"Confirm Password is required\"),\n  });\n\n  const initialValues = {\n    username: username,\n    email: email,\n    password: password,\n    confirmPassword: confirmPassword,\n  };\n\n  return (\n    <div id=\"form\">\n      {authUser && <Redirect to=\"/\" />}\n      <h1 id=\"formTitle\">會員註冊</h1>\n      <Formik\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        onSubmit={(values) => console.log(values)}\n      >\n        {({ errors, touched }) => (\n          <Form>\n            <CustomField\n              label=\"名稱\"\n              name=\"username\"\n              type=\"text\"\n              errors={errors.username}\n              touched={touched.username}\n              onKeyUp={(e) => {\n                setUsername(e.target.value);\n              }}\n            />\n            <CustomField\n              label=\"郵件\"\n              name=\"email\"\n              type=\"email\"\n              errors={errors.email}\n              touched={touched.email}\n              onKeyUp={(e) => {\n                setEmail(e.target.value);\n              }}\n            />\n            <CustomField\n              label=\"密碼\"\n              name=\"password\"\n              type=\"password\"\n              errors={errors.password}\n              touched={touched.password}\n              onKeyUp={(e) => {\n                setPassword(e.target.value);\n              }}\n            />\n            <CustomField\n              label=\"確認密碼\"\n              name=\"confirmPassword\"\n              type=\"password\"\n              errors={errors.confirmPassword}\n              touched={touched.confirmPassword}\n              onKeyUp={(e) => {\n                setConfirmPassword(e.target.value);\n              }}\n            />\n\n            <div className=\"form-group mt-2\">\n              <button\n                type=\"submit\"\n                value=\"Submit\"\n                className=\"btn btn-primary mt-2\"\n                onClick={handleSignUp}\n              >\n                確認送出\n              </button>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </div>\n  );\n};\n\nexport default RegisterForm;\n"]},"metadata":{},"sourceType":"module"}