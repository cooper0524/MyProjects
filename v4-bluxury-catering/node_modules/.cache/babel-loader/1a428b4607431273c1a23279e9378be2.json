{"ast":null,"code":"import _slicedToArray from\"/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import CustomField from\"../common/CustomField\";import{Redirect}from\"react-router-dom\";import{Link}from\"react-router-dom\";import{Formik,Form}from\"formik\";import{auth}from\"../services/firebase\";import*as Yup from\"yup\";import useFetchUser from\"../customHook/useFetchUser\";var LoginForm=function LoginForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];// const [emailHasBeenSent, setEmailHasBeenSent] = useState(false);\nvar authUser=useFetchUser();function handleSignIn(){auth.signInWithEmailAndPassword(email,password).catch(function(error){// Handle Errors here.\nvar errorCode=error.code;var errorMessage=error.message;// [START_EXCLUDE]\nif(errorCode===\"auth/wrong-password\"){alert(\"Wrong password.\");}else{console.log(errorMessage);}});}// const forgotPassword = (email) => {\n//   auth.sendPasswordResetEmail(email).then(() => {\n//     setEmailHasBeenSent(true);\n//     setTimeout(() => {\n//       setEmailHasBeenSent(false);\n//     }, 3000);\n//     alert(\"郵件已寄出，請至郵箱確認\");\n//   });\n// };\nvar validationSchema=Yup.object().shape({username:Yup.string().required(\"First Name is required\"),email:Yup.string().email(\"Email is invalid\").required(\"Email is required\"),password:Yup.string().min(6,\"Password must be at least 6 characters\").required(\" Password is required\"),confirmPassword:Yup.string().oneOf([Yup.ref(\"password\"),null],\"Passwords must match\").required(\"Confirm Password is required\")});var initialValues={email:email,password:password};return/*#__PURE__*/React.createElement(\"div\",{id:\"form\"},authUser&&/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}),/*#__PURE__*/React.createElement(\"h1\",{id:\"formTitle\"},\"\\u6703\\u54E1\\u767B\\u5165\"),/*#__PURE__*/React.createElement(Formik,{initialValues:initialValues,validationSchema:validationSchema,onSubmit:function onSubmit(values){return console.log(values);}},function(_ref){var errors=_ref.errors,touched=_ref.touched;return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(CustomField,{label:\"\\u90F5\\u4EF6\",name:\"email\",type:\"email\",errors:errors.email,touched:touched.email,onKeyUp:function onKeyUp(e){setEmail(e.target.value);}}),/*#__PURE__*/React.createElement(CustomField,{label:\"\\u5BC6\\u78BC\",name:\"password\",type:\"password\",errors:errors.password,touched:touched.password,onKeyUp:function onKeyUp(e){setPassword(e.target.value);}}),/*#__PURE__*/React.createElement(\"p\",null,\"\\u66AB\\u672A\\u958B\\u653E\\u4E00\\u822C\\u6703\\u54E1\\u8A3B\\u518A\\uFF0C\\u656C\\u8ACB\\u898B\\u8AD2\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mt-4 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",value:\"Submit\",className:\"btn btn-primary m-auto\",onClick:handleSignIn},\"\\u767B\\u5165\"),/*#__PURE__*/React.createElement(Link,{className:\"m-auto\",to:\"/\\u8A3B\\u518A\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary \",disabled:true},\"\\u8A3B\\u518A\"))));}));};export default LoginForm;","map":{"version":3,"sources":["/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/src/components/LoginForm.jsx"],"names":["React","useState","CustomField","Redirect","Link","Formik","Form","auth","Yup","useFetchUser","LoginForm","email","setEmail","password","setPassword","authUser","handleSignIn","signInWithEmailAndPassword","catch","error","errorCode","code","errorMessage","message","alert","console","log","validationSchema","object","shape","username","string","required","min","confirmPassword","oneOf","ref","initialValues","values","errors","touched","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport CustomField from \"../common/CustomField\";\nimport { Redirect } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { Formik, Form } from \"formik\";\nimport { auth } from \"../services/firebase\";\nimport * as Yup from \"yup\";\n\nimport useFetchUser from \"../customHook/useFetchUser\";\n\nconst LoginForm = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  // const [emailHasBeenSent, setEmailHasBeenSent] = useState(false);\n  const authUser = useFetchUser();\n\n  function handleSignIn() {\n    auth.signInWithEmailAndPassword(email, password).catch(function (error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // [START_EXCLUDE]\n      if (errorCode === \"auth/wrong-password\") {\n        alert(\"Wrong password.\");\n      } else {\n        console.log(errorMessage);\n      }\n    });\n  }\n\n  // const forgotPassword = (email) => {\n  //   auth.sendPasswordResetEmail(email).then(() => {\n  //     setEmailHasBeenSent(true);\n  //     setTimeout(() => {\n  //       setEmailHasBeenSent(false);\n  //     }, 3000);\n  //     alert(\"郵件已寄出，請至郵箱確認\");\n  //   });\n  // };\n\n  const validationSchema = Yup.object().shape({\n    username: Yup.string().required(\"First Name is required\"),\n    email: Yup.string().email(\"Email is invalid\").required(\"Email is required\"),\n    password: Yup.string()\n      .min(6, \"Password must be at least 6 characters\")\n      .required(\" Password is required\"),\n\n    confirmPassword: Yup.string()\n      .oneOf([Yup.ref(\"password\"), null], \"Passwords must match\")\n      .required(\"Confirm Password is required\"),\n  });\n\n  const initialValues = {\n    email: email,\n    password: password,\n  };\n\n  return (\n    <div id=\"form\">\n      {authUser && <Redirect to=\"/\" />}\n      <h1 id=\"formTitle\">會員登入</h1>\n      <Formik\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        onSubmit={(values) => console.log(values)}\n      >\n        {({ errors, touched }) => (\n          <Form>\n            <CustomField\n              label=\"郵件\"\n              name=\"email\"\n              type=\"email\"\n              errors={errors.email}\n              touched={touched.email}\n              onKeyUp={(e) => {\n                setEmail(e.target.value);\n              }}\n            />\n            <CustomField\n              label=\"密碼\"\n              name=\"password\"\n              type=\"password\"\n              errors={errors.password}\n              touched={touched.password}\n              onKeyUp={(e) => {\n                setPassword(e.target.value);\n              }}\n            />\n\n            <p>暫未開放一般會員註冊，敬請見諒</p>\n\n            <div className=\"form-group mt-4 d-flex justify-content-center\">\n              <button\n                type=\"submit\"\n                value=\"Submit\"\n                className=\"btn btn-primary m-auto\"\n                onClick={handleSignIn}\n              >\n                登入\n              </button>\n\n              {/* <button\n                className=\"btn btn-primary\"\n                type=\"button\"\n                onClick={forgotPassword(email)}\n              >\n                忘記密碼\n              </button> */}\n\n              <Link className=\"m-auto\" to=\"/註冊\">\n                <button className=\"btn btn-primary \" disabled>\n                  註冊\n                </button>\n              </Link>\n            </div>\n          </Form>\n        )}\n      </Formik>\n    </div>\n  );\n};\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}