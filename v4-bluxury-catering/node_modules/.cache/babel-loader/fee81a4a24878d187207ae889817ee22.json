{"ast":null,"code":"var _jsxFileName = \"/Users/Cooper/Bluxury_Catering/bluxury-catering/src/components/EditForm.jsx\";\nimport React, { useState } from \"react\";\nimport { Button, Form } from \"react-bootstrap\";\nimport firebase, { storage } from \"../services/firebase\";\n\nconst EditForm = ({\n  categories,\n  product,\n  onCloseModal\n}) => {\n  const [image, setImage] = useState(null);\n  const [url, setUrl] = useState(product.url);\n  const [progress, setProgress] = useState(0);\n  const [title, setTitle] = useState(product.title);\n  const [category, setCategory] = useState(product.category);\n  const [price, setPrice] = useState(product.price);\n  const [xPrice, setXPrice] = useState(product.xPrice);\n  const productId = product.id;\n\n  const handleImgDisplay = event => {\n    setImage(event.target.files[0]);\n  };\n\n  const handleUpload = e => {\n    e.preventDefault();\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\"state_changed\", snapshot => {\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, error => {\n      console.log(error);\n    }, () => {\n      storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n        setUrl(url);\n      });\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (title.trim() === \"\") {\n      alert(\"?\");\n    } else {\n      const editTime = firebase.firestore.Timestamp.fromDate(new Date()).toDate();\n      firebase.firestore().collection(\"products\").doc(productId).set({\n        title,\n        category,\n        price,\n        xPrice,\n        url,\n        editTime\n      }).then(onCloseModal);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"progress\", {\n    value: progress,\n    max: \"100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: url || \"https://via.placeholder.com/300\",\n    alt: \"productImg\",\n    height: \"200px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Form.File, {\n    id: \"exampleFormControlFile1\",\n    label: \"\\u9078\\u53D6\\u5716\\u7247\",\n    onChange: handleImgDisplay,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"danger\",\n    type: \"button\",\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, \"\\u65B0\\u589E\")), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"productTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, \"\\u7522\\u54C1\\u540D\\u7A31\"), /*#__PURE__*/React.createElement(Form.Control, {\n    onChange: e => setTitle(e.currentTarget.value),\n    value: title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"productCategory\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, \"\\u7522\\u54C1\\u985E\\u5225\"), /*#__PURE__*/React.createElement(Form.Control, {\n    value: category,\n    as: \"select\",\n    onChange: e => setCategory(e.currentTarget.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, categories.map(category => /*#__PURE__*/React.createElement(\"option\", {\n    key: category,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, category)))), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"productPrice\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, \"\\u539F\\u50F9\"), /*#__PURE__*/React.createElement(Form.Control, {\n    value: price,\n    type: \"number\",\n    onChange: e => setPrice(e.currentTarget.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"productXPrice\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, \"\\u7279\\u50F9\"), /*#__PURE__*/React.createElement(Form.Control, {\n    value: xPrice,\n    type: \"number\",\n    placeholder: \"\\u7121\\u7279\\u50F9\\u8ACB\\u7A7A\\u767D\",\n    onChange: e => setXPrice(e.currentTarget.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    type: \"button\",\n    onClick: handleSubmit,\n    block: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, \"\\u78BA\\u8A8D\\u8B8A\\u66F4\"));\n};\n\nexport default EditForm;","map":{"version":3,"sources":["/Users/Cooper/Bluxury_Catering/bluxury-catering/src/components/EditForm.jsx"],"names":["React","useState","Button","Form","firebase","storage","EditForm","categories","product","onCloseModal","image","setImage","url","setUrl","progress","setProgress","title","setTitle","category","setCategory","price","setPrice","xPrice","setXPrice","productId","id","handleImgDisplay","event","target","files","handleUpload","e","preventDefault","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","handleSubmit","trim","alert","editTime","firestore","Timestamp","fromDate","Date","toDate","collection","doc","set","currentTarget","value","map"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Button, Form } from \"react-bootstrap\";\nimport firebase, { storage } from \"../services/firebase\";\n\nconst EditForm = ({ categories, product, onCloseModal }) => {\n  const [image, setImage] = useState(null);\n  const [url, setUrl] = useState(product.url);\n  const [progress, setProgress] = useState(0);\n  const [title, setTitle] = useState(product.title);\n  const [category, setCategory] = useState(product.category);\n  const [price, setPrice] = useState(product.price);\n  const [xPrice, setXPrice] = useState(product.xPrice);\n  const productId = product.id;\n\n  const handleImgDisplay = (event) => {\n    setImage(event.target.files[0]);\n  };\n\n  const handleUpload = (e) => {\n    e.preventDefault();\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        const progress = Math.round(\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        );\n        setProgress(progress);\n      },\n      (error) => {\n        console.log(error);\n      },\n      () => {\n        storage\n          .ref(\"images\")\n          .child(image.name)\n          .getDownloadURL()\n          .then((url) => {\n            setUrl(url);\n          });\n      }\n    );\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (title.trim() === \"\") {\n      alert(\"?\");\n    } else {\n      const editTime = firebase.firestore.Timestamp.fromDate(\n        new Date()\n      ).toDate();\n      firebase\n        .firestore()\n        .collection(\"products\")\n        .doc(productId)\n        .set({ title, category, price, xPrice, url, editTime })\n        .then(onCloseModal);\n    }\n  };\n\n  return (\n    <Form>\n      <progress value={progress} max=\"100\" />\n      <Form.Group>\n        <img\n          src={url || \"https://via.placeholder.com/300\"}\n          alt=\"productImg\"\n          height=\"200px\"\n        />\n        <Form.File\n          id=\"exampleFormControlFile1\"\n          label=\"選取圖片\"\n          onChange={handleImgDisplay}\n        />\n        <Button variant=\"danger\" type=\"button\" onClick={handleUpload}>\n          新增\n        </Button>\n      </Form.Group>\n      <Form.Group controlId=\"productTitle\">\n        <Form.Label>產品名稱</Form.Label>\n        <Form.Control\n          onChange={(e) => setTitle(e.currentTarget.value)}\n          value={title}\n        />\n      </Form.Group>\n      <Form.Group controlId=\"productCategory\">\n        <Form.Label>產品類別</Form.Label>\n        <Form.Control\n          value={category}\n          as=\"select\"\n          onChange={(e) => setCategory(e.currentTarget.value)}\n        >\n          {categories.map((category) => (\n            <option key={category}>{category}</option>\n          ))}\n        </Form.Control>\n      </Form.Group>\n      <Form.Group controlId=\"productPrice\">\n        <Form.Label>原價</Form.Label>\n        <Form.Control\n          value={price}\n          type=\"number\"\n          onChange={(e) => setPrice(e.currentTarget.value)}\n        />\n      </Form.Group>\n      <Form.Group controlId=\"productXPrice\">\n        <Form.Label>特價</Form.Label>\n        <Form.Control\n          value={xPrice}\n          type=\"number\"\n          placeholder=\"無特價請空白\"\n          onChange={(e) => setXPrice(e.currentTarget.value)}\n        />\n      </Form.Group>\n      <Button variant=\"primary\" type=\"button\" onClick={handleSubmit} block>\n        確認變更\n      </Button>\n    </Form>\n  );\n};\n\nexport default EditForm;\n"]},"metadata":{},"sourceType":"module"}