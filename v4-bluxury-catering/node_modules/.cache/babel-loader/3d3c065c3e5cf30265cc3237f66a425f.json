{"ast":null,"code":"import _slicedToArray from\"/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import CustomField from\"../common/CustomField\";import{Formik,Form,Field,ErrorMessage}from\"formik\";import BootForm from\"react-bootstrap/Form\";import{Button}from\"react-bootstrap\";import*as Yup from\"yup\";import firebase,{storage}from\"../services/firebase\";var EditForm=function EditForm(_ref){var categories=_ref.categories,product=_ref.product,onCloseModal=_ref.onCloseModal,doc=_ref.doc,collection=_ref.collection;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(product.url),_useState4=_slicedToArray(_useState3,2),url=_useState4[0],setUrl=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),progress=_useState6[0],setProgress=_useState6[1];var _useState7=useState(product.title),_useState8=_slicedToArray(_useState7,2),title=_useState8[0],setTitle=_useState8[1];var _useState9=useState(product.category),_useState10=_slicedToArray(_useState9,2),category=_useState10[0],setCategory=_useState10[1];var _useState11=useState(product.price),_useState12=_slicedToArray(_useState11,2),price=_useState12[0],setPrice=_useState12[1];var _useState13=useState(product.xPrice),_useState14=_slicedToArray(_useState13,2),xPrice=_useState14[0],setXPrice=_useState14[1];var _useState15=useState(product.desc),_useState16=_slicedToArray(_useState15,2),desc=_useState16[0],setDesc=_useState16[1];var productId=product.id;var randomNum=1+Math.random()*(1000-1);var handleImgDisplay=function handleImgDisplay(event){setImage(event.target.files[0]);};var handleUpload=function handleUpload(e){e.preventDefault();var imgRef=image.name+randomNum;var uploadTask=storage.ref(\"images/\".concat(imgRef)).put(image);uploadTask.on(\"state_changed\",function(snapshot){var progress=Math.round(snapshot.bytesTransferred/snapshot.totalBytes*100);setProgress(progress);},function(error){console.log(error);},function(){storage.ref(\"images\").child(imgRef).getDownloadURL().then(function(url){setUrl(url);});});};var handleSubmit=function handleSubmit(){if(title.trim()===\"\"){alert(\"?\");}else{var editTime=Date();editTime=firebase.firestore.Timestamp.fromDate(new Date()).toDate();firebase.firestore().collection(\"products\").doc(doc).collection(collection).doc(productId).set({title:title,category:category,price:price,xPrice:xPrice,url:url,editTime:editTime,desc:desc}).then(onCloseModal);}};var validationSchema=Yup.object().shape({title:Yup.string().required(\"First Name is required\"),category:Yup.string().required(),price:Yup.string().required(\"Password is required\"),xPrice:Yup.string(),desc:Yup.string()});var initialValues={title:title,category:category,price:price,xPrice:xPrice,desc:desc};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"section\",{id:\"productForm\"},/*#__PURE__*/React.createElement(\"progress\",{id:\"progress\",value:progress,max:\"100\"}),/*#__PURE__*/React.createElement(BootForm,null,/*#__PURE__*/React.createElement(\"img\",{className:\"d-flex m-auto\",src:url,alt:\"productImg\",height:\"200px\",width:\"100%\"}),/*#__PURE__*/React.createElement(BootForm.File,{id:\"exampleFormControlFile1\",label:\"\\u9078\\u53D6\\u5716\\u7247\",onChange:handleImgDisplay}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center pt-2\"},image?/*#__PURE__*/React.createElement(Button,{variant:\"danger\",type:\"button\",onClick:handleUpload},\"\\u65B0\\u589E\"):/*#__PURE__*/React.createElement(Button,{variant:\"danger\",type:\"button\",onClick:handleUpload,disabled:true},\"\\u65B0\\u589E\")))),/*#__PURE__*/React.createElement(Formik,{initialValues:initialValues,validationSchema:validationSchema,onSubmit:handleSubmit},function(_ref2){var errors=_ref2.errors,touched=_ref2.touched;return/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(CustomField,{label:\"\\u7522\\u54C1\\u540D\\u7A31\",name:\"title\",errors:errors.title,touched:touched.title,onKeyUp:function onKeyUp(e){setTitle(e.target.value);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group text-left\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"category\"},\"\\u7522\\u54C1\\u985E\\u5225\"),/*#__PURE__*/React.createElement(Field,{as:\"select\",label:\"\\u7522\\u54C1\\u985E\\u5225\",name:\"category\",onBlur:function onBlur(e){setCategory(e.target.value);},className:\"form-control\"+(errors.category&&touched.category?\" is-invalid\":\"\")},categories.map(function(category){return/*#__PURE__*/React.createElement(\"option\",{key:category,value:category},category);})),/*#__PURE__*/React.createElement(ErrorMessage,{name:\"category\",component:\"div\",className:\"invalid-feedback\"})),/*#__PURE__*/React.createElement(CustomField,{type:\"textarea\",label:\"\\u5B9A\\u50F9\",name:\"price\",errors:errors.price,touched:touched.price,onKeyUp:function onKeyUp(e){setPrice(e.target.value);}}),/*#__PURE__*/React.createElement(CustomField,{label:\"\\u7279\\u50F9\",name:\"xPrice\",placeholder:\"\\u7121\\u7279\\u50F9\\u8ACB\\u7A7A\\u767D\",errors:errors.xPrice,touched:touched.xPrice,onKeyUp:function onKeyUp(e){setXPrice(e.target.value);}}),/*#__PURE__*/React.createElement(CustomField,{component:\"textarea\",label:\"\\u5546\\u54C1\\u4ECB\\u7D39\",name:\"desc\",errors:errors.desc,touched:touched.desc,onKeyUp:function onKeyUp(e){setDesc(e.target.value);}}),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\",value:\"Submit\",block:true},\"\\u65B0\\u589E\"));}))// <Form>\n//   <progress value={progress} max=\"100\" />\n//   <Form.Group>\n//     <img\n//       src={url || \"https://via.placeholder.com/300\"}\n//       alt=\"productImg\"\n//       height=\"200px\"\n//     />\n//     <Form.File\n//       id=\"exampleFormControlFile1\"\n//       label=\"選取圖片\"\n//       onChange={handleImgDisplay}\n//     />\n//     <Button variant=\"danger\" type=\"button\" onClick={handleUpload}>\n//       新增\n//     </Button>\n//   </Form.Group>\n//   <Form.Group controlId=\"productTitle\">\n//     <Form.Label>產品名稱</Form.Label>\n//     <Form.Control\n//       onChange={(e) => setTitle(e.currentTarget.value)}\n//       value={title}\n//     />\n//   </Form.Group>\n//   <Form.Group controlId=\"productCategory\">\n//     <Form.Label>產品類別</Form.Label>\n//     <Form.Control\n//       value={category}\n//       as=\"select\"\n//       onChange={(e) => setCategory(e.currentTarget.value)}\n//     >\n//       {categories.map((category) => (\n//         <option key={category}>{category}</option>\n//       ))}\n//     </Form.Control>\n//   </Form.Group>\n//   <Form.Group controlId=\"productPrice\">\n//     <Form.Label>原價</Form.Label>\n//     <Form.Control\n//       value={price}\n//       type=\"number\"\n//       onChange={(e) => setPrice(e.currentTarget.value)}\n//     />\n//   </Form.Group>\n//   <Form.Group controlId=\"productXPrice\">\n//     <Form.Label>特價</Form.Label>\n//     <Form.Control\n//       value={xPrice}\n//       type=\"number\"\n//       placeholder=\"無特價請空白\"\n//       onChange={(e) => setXPrice(e.currentTarget.value)}\n//     />\n//   </Form.Group>\n//   <Button variant=\"primary\" type=\"button\" onClick={handleSubmit} block>\n//     確認變更\n//   </Button>\n// </Form>\n;};export default EditForm;","map":{"version":3,"sources":["/Users/Cooper/Bluxury_Catering/bluxury-catering copy 3/src/components/EditForm.jsx"],"names":["React","useState","CustomField","Formik","Form","Field","ErrorMessage","BootForm","Button","Yup","firebase","storage","EditForm","categories","product","onCloseModal","doc","collection","image","setImage","url","setUrl","progress","setProgress","title","setTitle","category","setCategory","price","setPrice","xPrice","setXPrice","desc","setDesc","productId","id","randomNum","Math","random","handleImgDisplay","event","target","files","handleUpload","e","preventDefault","imgRef","name","uploadTask","ref","put","on","snapshot","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","handleSubmit","trim","alert","editTime","Date","firestore","Timestamp","fromDate","toDate","set","validationSchema","object","shape","string","required","initialValues","errors","touched","value","map"],"mappings":"6KAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,KAAvB,CAA8BC,YAA9B,KAAkD,QAAlD,CACA,MAAOC,CAAAA,QAAP,KAAqB,sBAArB,CACA,OAASC,MAAT,KAAuB,iBAAvB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,MAAOC,CAAAA,QAAP,EAAmBC,OAAnB,KAAkC,sBAAlC,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAA4D,IAAzDC,CAAAA,UAAyD,MAAzDA,UAAyD,CAA7CC,OAA6C,MAA7CA,OAA6C,CAApCC,YAAoC,MAApCA,YAAoC,CAAtBC,GAAsB,MAAtBA,GAAsB,CAAjBC,UAAiB,MAAjBA,UAAiB,eACjDhB,QAAQ,CAAC,IAAD,CADyC,wCACpEiB,KADoE,eAC7DC,QAD6D,8BAErDlB,QAAQ,CAACa,OAAO,CAACM,GAAT,CAF6C,yCAEpEA,GAFoE,eAE/DC,MAF+D,8BAG3CpB,QAAQ,CAAC,CAAD,CAHmC,yCAGpEqB,QAHoE,eAG1DC,WAH0D,8BAIjDtB,QAAQ,CAACa,OAAO,CAACU,KAAT,CAJyC,yCAIpEA,KAJoE,eAI7DC,QAJ6D,8BAK3CxB,QAAQ,CAACa,OAAO,CAACY,QAAT,CALmC,0CAKpEA,QALoE,gBAK1DC,WAL0D,gCAMjD1B,QAAQ,CAACa,OAAO,CAACc,KAAT,CANyC,2CAMpEA,KANoE,gBAM7DC,QAN6D,gCAO/C5B,QAAQ,CAACa,OAAO,CAACgB,MAAT,CAPuC,2CAOpEA,MAPoE,gBAO5DC,SAP4D,gCAQnD9B,QAAQ,CAACa,OAAO,CAACkB,IAAT,CAR2C,2CAQpEA,IARoE,gBAQ9DC,OAR8D,gBAS3E,GAAMC,CAAAA,SAAS,CAAGpB,OAAO,CAACqB,EAA1B,CAEA,GAAIC,CAAAA,SAAS,CAAG,EAAIC,IAAI,CAACC,MAAL,IAAiB,KAAO,CAAxB,CAApB,CACA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,KAAD,CAAW,CAClCrB,QAAQ,CAACqB,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAR,CACD,CAFD,CAIA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GACA,GAAMC,CAAAA,MAAM,CAAG5B,KAAK,CAAC6B,IAAN,CAAaX,SAA5B,CACA,GAAMY,CAAAA,UAAU,CAAGrC,OAAO,CAACsC,GAAR,kBAAsBH,MAAtB,GAAgCI,GAAhC,CAAoChC,KAApC,CAAnB,CACA8B,UAAU,CAACG,EAAX,CACE,eADF,CAEE,SAACC,QAAD,CAAc,CACZ,GAAM9B,CAAAA,QAAQ,CAAGe,IAAI,CAACgB,KAAL,CACdD,QAAQ,CAACE,gBAAT,CAA4BF,QAAQ,CAACG,UAAtC,CAAoD,GADrC,CAAjB,CAGAhC,WAAW,CAACD,QAAD,CAAX,CACD,CAPH,CAQE,SAACkC,KAAD,CAAW,CACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAVH,CAWE,UAAM,CACJ7C,OAAO,CACJsC,GADH,CACO,QADP,EAEGU,KAFH,CAESb,MAFT,EAGGc,cAHH,GAIGC,IAJH,CAIQ,SAACzC,GAAD,CAAS,CACbC,MAAM,CAACD,GAAD,CAAN,CACD,CANH,EAOD,CAnBH,EAqBD,CAzBD,CA2BA,GAAM0C,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAItC,KAAK,CAACuC,IAAN,KAAiB,EAArB,CAAyB,CACvBC,KAAK,CAAC,GAAD,CAAL,CACD,CAFD,IAEO,CACL,GAAIC,CAAAA,QAAQ,CAAGC,IAAI,EAAnB,CACAD,QAAQ,CAAGvD,QAAQ,CAACyD,SAAT,CAAmBC,SAAnB,CAA6BC,QAA7B,CAAsC,GAAIH,CAAAA,IAAJ,EAAtC,EAAkDI,MAAlD,EAAX,CACA5D,QAAQ,CACLyD,SADH,GAEGlD,UAFH,CAEc,UAFd,EAGGD,GAHH,CAGOA,GAHP,EAIGC,UAJH,CAIcA,UAJd,EAKGD,GALH,CAKOkB,SALP,EAMGqC,GANH,CAMO,CAAE/C,KAAK,CAALA,KAAF,CAASE,QAAQ,CAARA,QAAT,CAAmBE,KAAK,CAALA,KAAnB,CAA0BE,MAAM,CAANA,MAA1B,CAAkCV,GAAG,CAAHA,GAAlC,CAAuC6C,QAAQ,CAARA,QAAvC,CAAiDjC,IAAI,CAAJA,IAAjD,CANP,EAOG6B,IAPH,CAOQ9C,YAPR,EAQD,CACF,CAfD,CAiBA,GAAMyD,CAAAA,gBAAgB,CAAG/D,GAAG,CAACgE,MAAJ,GAAaC,KAAb,CAAmB,CAC1ClD,KAAK,CAAEf,GAAG,CAACkE,MAAJ,GAAaC,QAAb,CAAsB,wBAAtB,CADmC,CAE1ClD,QAAQ,CAAEjB,GAAG,CAACkE,MAAJ,GAAaC,QAAb,EAFgC,CAG1ChD,KAAK,CAAEnB,GAAG,CAACkE,MAAJ,GAAaC,QAAb,CAAsB,sBAAtB,CAHmC,CAI1C9C,MAAM,CAAErB,GAAG,CAACkE,MAAJ,EAJkC,CAK1C3C,IAAI,CAAEvB,GAAG,CAACkE,MAAJ,EALoC,CAAnB,CAAzB,CAQA,GAAME,CAAAA,aAAa,CAAG,CACpBrD,KAAK,CAAEA,KADa,CAEpBE,QAAQ,CAAEA,QAFU,CAGpBE,KAAK,CAAEA,KAHa,CAIpBE,MAAM,CAAEA,MAJY,CAKpBE,IAAI,CAAEA,IALc,CAAtB,CAQA,mBACE,4CACE,+BAAS,EAAE,CAAC,aAAZ,eACE,gCAAU,EAAE,CAAC,UAAb,CAAwB,KAAK,CAAEV,QAA/B,CAAyC,GAAG,CAAC,KAA7C,EADF,cAEE,oBAAC,QAAD,mBACE,2BACE,SAAS,CAAC,eADZ,CAEE,GAAG,CAAEF,GAFP,CAGE,GAAG,CAAC,YAHN,CAIE,MAAM,CAAC,OAJT,CAKE,KAAK,CAAC,MALR,EADF,cAQE,oBAAC,QAAD,CAAU,IAAV,EACE,EAAE,CAAC,yBADL,CAEE,KAAK,CAAC,0BAFR,CAGE,QAAQ,CAAEmB,gBAHZ,EARF,cAaE,2BAAK,SAAS,CAAC,oCAAf,EACGrB,KAAK,cACJ,oBAAC,MAAD,EAAQ,OAAO,CAAC,QAAhB,CAAyB,IAAI,CAAC,QAA9B,CAAuC,OAAO,CAAEyB,YAAhD,iBADI,cAKJ,oBAAC,MAAD,EACE,OAAO,CAAC,QADV,CAEE,IAAI,CAAC,QAFP,CAGE,OAAO,CAAEA,YAHX,CAIE,QAAQ,KAJV,iBANJ,CAbF,CAFF,CADF,cAmCE,oBAAC,MAAD,EACE,aAAa,CAAEkC,aADjB,CAEE,gBAAgB,CAAEL,gBAFpB,CAGE,QAAQ,CAAEV,YAHZ,EAKG,mBAAGgB,CAAAA,MAAH,OAAGA,MAAH,CAAWC,OAAX,OAAWA,OAAX,oBACC,oBAAC,IAAD,mBACE,oBAAC,WAAD,EACE,KAAK,CAAC,0BADR,CAEE,IAAI,CAAC,OAFP,CAGE,MAAM,CAAED,MAAM,CAACtD,KAHjB,CAIE,OAAO,CAAEuD,OAAO,CAACvD,KAJnB,CAKE,OAAO,CAAE,iBAACoB,CAAD,CAAO,CACdnB,QAAQ,CAACmB,CAAC,CAACH,MAAF,CAASuC,KAAV,CAAR,CACD,CAPH,EADF,cAUE,2BAAK,SAAS,CAAC,sBAAf,eACE,6BAAO,OAAO,CAAC,UAAf,6BADF,cAEE,oBAAC,KAAD,EACE,EAAE,CAAC,QADL,CAEE,KAAK,CAAC,0BAFR,CAGE,IAAI,CAAC,UAHP,CAIE,MAAM,CAAE,gBAACpC,CAAD,CAAO,CACbjB,WAAW,CAACiB,CAAC,CAACH,MAAF,CAASuC,KAAV,CAAX,CACD,CANH,CAOE,SAAS,CACP,gBACCF,MAAM,CAACpD,QAAP,EAAmBqD,OAAO,CAACrD,QAA3B,CAAsC,aAAtC,CAAsD,EADvD,CARJ,EAYGb,UAAU,CAACoE,GAAX,CAAe,SAACvD,QAAD,qBACd,8BAAQ,GAAG,CAAEA,QAAb,CAAuB,KAAK,CAAEA,QAA9B,EACGA,QADH,CADc,EAAf,CAZH,CAFF,cAqBE,oBAAC,YAAD,EACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,KAFZ,CAGE,SAAS,CAAC,kBAHZ,EArBF,CAVF,cAsCE,oBAAC,WAAD,EACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAC,cAFR,CAGE,IAAI,CAAC,OAHP,CAIE,MAAM,CAAEoD,MAAM,CAAClD,KAJjB,CAKE,OAAO,CAAEmD,OAAO,CAACnD,KALnB,CAME,OAAO,CAAE,iBAACgB,CAAD,CAAO,CACdf,QAAQ,CAACe,CAAC,CAACH,MAAF,CAASuC,KAAV,CAAR,CACD,CARH,EAtCF,cAgDE,oBAAC,WAAD,EACE,KAAK,CAAC,cADR,CAEE,IAAI,CAAC,QAFP,CAGE,WAAW,CAAC,sCAHd,CAIE,MAAM,CAAEF,MAAM,CAAChD,MAJjB,CAKE,OAAO,CAAEiD,OAAO,CAACjD,MALnB,CAME,OAAO,CAAE,iBAACc,CAAD,CAAO,CACdb,SAAS,CAACa,CAAC,CAACH,MAAF,CAASuC,KAAV,CAAT,CACD,CARH,EAhDF,cA0DE,oBAAC,WAAD,EACE,SAAS,CAAC,UADZ,CAEE,KAAK,CAAC,0BAFR,CAGE,IAAI,CAAC,MAHP,CAIE,MAAM,CAAEF,MAAM,CAAC9C,IAJjB,CAKE,OAAO,CAAE+C,OAAO,CAAC/C,IALnB,CAME,OAAO,CAAE,iBAACY,CAAD,CAAO,CACdX,OAAO,CAACW,CAAC,CAACH,MAAF,CAASuC,KAAV,CAAP,CACD,CARH,EA1DF,cAqEE,oBAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,CAAwC,KAAK,CAAC,QAA9C,CAAuD,KAAK,KAA5D,iBArEF,CADD,EALH,CAnCF,CAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9KF,CAgLD,CA5PD,CA8PA,cAAepE,CAAAA,QAAf","sourcesContent":["import React, { useState } from \"react\";\nimport CustomField from \"../common/CustomField\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\nimport BootForm from \"react-bootstrap/Form\";\nimport { Button } from \"react-bootstrap\";\nimport * as Yup from \"yup\";\nimport firebase, { storage } from \"../services/firebase\";\n\nconst EditForm = ({ categories, product, onCloseModal, doc, collection }) => {\n  const [image, setImage] = useState(null);\n  const [url, setUrl] = useState(product.url);\n  const [progress, setProgress] = useState(0);\n  const [title, setTitle] = useState(product.title);\n  const [category, setCategory] = useState(product.category);\n  const [price, setPrice] = useState(product.price);\n  const [xPrice, setXPrice] = useState(product.xPrice);\n  const [desc, setDesc] = useState(product.desc);\n  const productId = product.id;\n\n  var randomNum = 1 + Math.random() * (1000 - 1);\n  const handleImgDisplay = (event) => {\n    setImage(event.target.files[0]);\n  };\n\n  const handleUpload = (e) => {\n    e.preventDefault();\n    const imgRef = image.name + randomNum;\n    const uploadTask = storage.ref(`images/${imgRef}`).put(image);\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        const progress = Math.round(\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        );\n        setProgress(progress);\n      },\n      (error) => {\n        console.log(error);\n      },\n      () => {\n        storage\n          .ref(\"images\")\n          .child(imgRef)\n          .getDownloadURL()\n          .then((url) => {\n            setUrl(url);\n          });\n      }\n    );\n  };\n\n  const handleSubmit = () => {\n    if (title.trim() === \"\") {\n      alert(\"?\");\n    } else {\n      var editTime = Date();\n      editTime = firebase.firestore.Timestamp.fromDate(new Date()).toDate();\n      firebase\n        .firestore()\n        .collection(\"products\")\n        .doc(doc)\n        .collection(collection)\n        .doc(productId)\n        .set({ title, category, price, xPrice, url, editTime, desc })\n        .then(onCloseModal);\n    }\n  };\n\n  const validationSchema = Yup.object().shape({\n    title: Yup.string().required(\"First Name is required\"),\n    category: Yup.string().required(),\n    price: Yup.string().required(\"Password is required\"),\n    xPrice: Yup.string(),\n    desc: Yup.string(),\n  });\n\n  const initialValues = {\n    title: title,\n    category: category,\n    price: price,\n    xPrice: xPrice,\n    desc: desc,\n  };\n\n  return (\n    <div>\n      <section id=\"productForm\">\n        <progress id=\"progress\" value={progress} max=\"100\" />\n        <BootForm>\n          <img\n            className=\"d-flex m-auto\"\n            src={url}\n            alt=\"productImg\"\n            height=\"200px\"\n            width=\"100%\"\n          />\n          <BootForm.File\n            id=\"exampleFormControlFile1\"\n            label=\"選取圖片\"\n            onChange={handleImgDisplay}\n          />\n          <div className=\"d-flex justify-content-center pt-2\">\n            {image ? (\n              <Button variant=\"danger\" type=\"button\" onClick={handleUpload}>\n                新增\n              </Button>\n            ) : (\n              <Button\n                variant=\"danger\"\n                type=\"button\"\n                onClick={handleUpload}\n                disabled\n              >\n                新增\n              </Button>\n            )}\n          </div>\n        </BootForm>\n      </section>\n\n      <Formik\n        initialValues={initialValues}\n        validationSchema={validationSchema}\n        onSubmit={handleSubmit}\n      >\n        {({ errors, touched }) => (\n          <Form>\n            <CustomField\n              label=\"產品名稱\"\n              name=\"title\"\n              errors={errors.title}\n              touched={touched.title}\n              onKeyUp={(e) => {\n                setTitle(e.target.value);\n              }}\n            />\n            <div className=\"form-group text-left\">\n              <label htmlFor=\"category\">產品類別</label>\n              <Field\n                as=\"select\"\n                label=\"產品類別\"\n                name=\"category\"\n                onBlur={(e) => {\n                  setCategory(e.target.value);\n                }}\n                className={\n                  \"form-control\" +\n                  (errors.category && touched.category ? \" is-invalid\" : \"\")\n                }\n              >\n                {categories.map((category) => (\n                  <option key={category} value={category}>\n                    {category}\n                  </option>\n                ))}\n              </Field>\n\n              <ErrorMessage\n                name=\"category\"\n                component=\"div\"\n                className=\"invalid-feedback\"\n              />\n            </div>\n\n            <CustomField\n              type=\"textarea\"\n              label=\"定價\"\n              name=\"price\"\n              errors={errors.price}\n              touched={touched.price}\n              onKeyUp={(e) => {\n                setPrice(e.target.value);\n              }}\n            />\n            <CustomField\n              label=\"特價\"\n              name=\"xPrice\"\n              placeholder=\"無特價請空白\"\n              errors={errors.xPrice}\n              touched={touched.xPrice}\n              onKeyUp={(e) => {\n                setXPrice(e.target.value);\n              }}\n            />\n            <CustomField\n              component=\"textarea\"\n              label=\"商品介紹\"\n              name=\"desc\"\n              errors={errors.desc}\n              touched={touched.desc}\n              onKeyUp={(e) => {\n                setDesc(e.target.value);\n              }}\n            />\n\n            <Button variant=\"primary\" type=\"submit\" value=\"Submit\" block>\n              新增\n            </Button>\n          </Form>\n        )}\n      </Formik>\n    </div>\n    // <Form>\n    //   <progress value={progress} max=\"100\" />\n    //   <Form.Group>\n    //     <img\n    //       src={url || \"https://via.placeholder.com/300\"}\n    //       alt=\"productImg\"\n    //       height=\"200px\"\n    //     />\n    //     <Form.File\n    //       id=\"exampleFormControlFile1\"\n    //       label=\"選取圖片\"\n    //       onChange={handleImgDisplay}\n    //     />\n    //     <Button variant=\"danger\" type=\"button\" onClick={handleUpload}>\n    //       新增\n    //     </Button>\n    //   </Form.Group>\n    //   <Form.Group controlId=\"productTitle\">\n    //     <Form.Label>產品名稱</Form.Label>\n    //     <Form.Control\n    //       onChange={(e) => setTitle(e.currentTarget.value)}\n    //       value={title}\n    //     />\n    //   </Form.Group>\n    //   <Form.Group controlId=\"productCategory\">\n    //     <Form.Label>產品類別</Form.Label>\n    //     <Form.Control\n    //       value={category}\n    //       as=\"select\"\n    //       onChange={(e) => setCategory(e.currentTarget.value)}\n    //     >\n    //       {categories.map((category) => (\n    //         <option key={category}>{category}</option>\n    //       ))}\n    //     </Form.Control>\n    //   </Form.Group>\n    //   <Form.Group controlId=\"productPrice\">\n    //     <Form.Label>原價</Form.Label>\n    //     <Form.Control\n    //       value={price}\n    //       type=\"number\"\n    //       onChange={(e) => setPrice(e.currentTarget.value)}\n    //     />\n    //   </Form.Group>\n    //   <Form.Group controlId=\"productXPrice\">\n    //     <Form.Label>特價</Form.Label>\n    //     <Form.Control\n    //       value={xPrice}\n    //       type=\"number\"\n    //       placeholder=\"無特價請空白\"\n    //       onChange={(e) => setXPrice(e.currentTarget.value)}\n    //     />\n    //   </Form.Group>\n    //   <Button variant=\"primary\" type=\"button\" onClick={handleSubmit} block>\n    //     確認變更\n    //   </Button>\n    // </Form>\n  );\n};\n\nexport default EditForm;\n"]},"metadata":{},"sourceType":"module"}